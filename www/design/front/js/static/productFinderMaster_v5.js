csvInput=csvInput.replace(/\n/g,"");var firstSplit=csvInput.split(";;");var brandArray=firstSplit[0].split(";");var brandIdArr=firstSplit[1].split(";");var brandHref=firstSplit[2].split(";");var catArray=firstSplit[3].split(";");var catIdArr=firstSplit[4].split(";");var catHref=firstSplit[5].split(";");var hotBrands=firstSplit[6].split(";");var hotIds=firstSplit[7].split(";");var hotHref=firstSplit[8].split(";");var pfBrandArray=firstSplit[0].split(";");var arraySetup=true;var hoverColor="#ffeea6";var selectIEColor="#caf0ff";var selectColorFF="rgb(202, 240, 255)";var selectColor="#caf0ff";var hoverFF="rgb(255, 238, 166)";var finderElement=document.getElementById('catNavContain');finderElement.onselectstart=function(){return false;}
var heightArr=new Array();var maxHeight=0;var maxDisplayed=0;var maxAdjust=13;var categoryNum;var categoryId=0;var categoryType="";var savePosition=0;var constVal=0;var mouseDrag=false;var catSelect=0;var TBwrapperClass=$("#wrapper").attr("class");var TBsliderMax=139;var categoryScrollMax=145;var scrollBarHeight=162;var TBExpand="http://images.totalbeauty.com/img/v5/pfPlus.gif";var TBContract="http://images.totalbeauty.com/img/v5/pfMinus.gif";var TBCategoryIndicator=$("div."+TBwrapperClass+" #finder div.divCategory").css("background-image");var defaultExpand="pfBody";switch(TBwrapperClass){case'jsInclude1':categoryScrollMax=74;scrollBarHeight=74;maxAdjust=9;TBsliderMax=159;TBExpand="http://images.totalbeauty.com/widget/images/womensday/plusButton.gif";TBContract="http://images.totalbeauty.com/widget/images/womensday/minusButton.gif";break;case'jsInclude2':categoryScrollMax=96;scrollBarHeight=96;maxAdjust=10;TBsliderMax=129;TBExpand="http://images.totalbeauty.com/widget/images/womensday/plusButton.gif";TBContract="http://images.totalbeauty.com/widget/images/womensday/minusButton.gif";break;case'stylelistPF':categoryScrollMax=93;scrollBarHeight=93;maxAdjust=9;TBsliderMax=159;TBExpand="http://images.totalbeauty.com/img/widgets/stylelist/stylelistPlusButton.gif";TBContract="http://images.totalbeauty.com/img/widgets/stylelist/stylelistMinusButton.gif";break;default:break;}
var faceExpand=1;var makeupExpand=1;var makeupPos=0;var hairExpand=1;var hairPos=0;var bodyExpand=1;var bodyPos=0;var pfContents=new Array();var PFdivname="#productCategory";$(PFdivname+" div").each(function(i){pfContents.push($(this));var divElementH=($(this).height());divElementH+=parseInt($(this).css("padding-top"))+parseInt($(this).css("padding-bottom"));var divElement=($(this).html());heightArr.push(divElementH);maxHeight+=divElementH;categoryNum=i;});categoryNum+=1;var maxHeightNum=categoryNum-maxAdjust;jQuery.grep(heightArr,function(n,i){if(i<=maxHeightNum+1){maxDisplayed+=n;}});var saveMaxDisplayed=maxDisplayed;for(e=1;e<pfContents.length;e++){var valText=pfContents[e].text();if(valText=="Makeup"){makeupPos=e;}else if(valText=="Hair"){hairPos=e;}else if(valText=="Body"){bodyPos=e;}}
catExpandContract("all","contract",defaultExpand);var brandNames="";for(g=0;g<brandArray.length;g++){brandNames+=brandArray[g]+";";}
var resultsNum=10;var resultsNumAlt=0;var selectNum=0;var selectTotal=5;var listContent="";var arrowScroll=0;var showBrands=false;$("#productBrands #searchStr").val("Submit 1 name at a time");var pageLocation=unescape(document.location.href);if(pageLocation.indexOf("?")!=-1){var urlArr=pageLocation.split("&");for(t=0;t<urlArr.length;t++){var startBracket=urlArr[t].indexOf("[");var endBracket=urlArr[t].indexOf("]");var formName=urlArr[t].substring(startBracket+1,endBracket);if(formName){var formVal=urlArr[t].substring((urlArr[t].indexOf("=")+1),urlArr[t].length);}
if(formVal){switch(formName)
{case"ex_in":break;case"in_ga":break;case"br1":{var brand1=formVal;break;}
case"br2":{var brand2=formVal;break;}
case"br3":{var brand3=formVal;break;}
case"br4":{var brand4=formVal;break;}
case"br5":{var brand5=formVal;break;}
case"c2":{var savedCategory=formVal;break;}
default:break;}}}
for(p=0;p<brandIdArr.length;p++){var selectedContent="<div class='cancelImg'><img src='http://images.totalbeauty.com/img/v5/productFinderCancel.gif' class='cancelSelect' /></div><div class='selectedBrands'>"+brandArray[p]+"</div>"
if(brandIdArr[p]==brand1){$("#brandSelected").css({display:"block"});$("#brandSelected div#selected1").html(selectedContent);$("#brandSelected div#selected1").css({display:"block"});$("#br1").val(brand1);}else if(brandIdArr[p]==brand2){if($("#brandSelected").css("display")!="block"){$("#brandSelected").css({display:"block"});}
$("#brandSelected div#selected2").html(selectedContent);$("#brandSelected div#selected2").css({display:"block"});$("#br2").val(brand2);}else if(brandIdArr[p]==brand3){if($("#brandSelected").css("display")!="block"){$("#brandSelected").css({display:"block"});}
$("#brandSelected div#selected3").html(selectedContent);$("#brandSelected div#selected3").css({display:"block"});$("#br3").val(brand3);}else if(brandIdArr[p]==brand4){if($("#brandSelected").css("display")!="block"){$("#brandSelected").css({display:"block"});}
$("#brandSelected div#selected4").html(selectedContent);$("#brandSelected div#selected4").css({display:"block"});$("#br4").val(brand4);}else if(brandIdArr[p]==brand5){if($("#brandSelected").css("display")!="block"){$("#brandSelected").css({display:"block"});}
$("#brandSelected div#selected5").html(selectedContent);$("#brandSelected div#selected5").css({display:"block"});$("#br5").val(brand5);}}
$("#categoryIdInput").val(savedCategory);var catSelect="cat"+savedCategory;for(g=0;g<catIdArr.length;g++){if(catIdArr[g]==savedCategory){var categoryName=catArray[g];break;}}
$("#productCategory #"+catSelect).css({backgroundColor:selectIEColor});var faceArrayPos=$("#productCategory #pfFace").parent().children().index($("#productCategory #pfFace")[0]);var makeupArrayPos=$("#productCategory #pfMakeup").parent().children().index($("#productCategory #pfMakeup")[0]);var hairArrayPos=$("#productCategory #pfHair").parent().children().index($("#productCategory #pfHair")[0]);var bodyArrayPos=$("#productCategory #pfBody").parent().children().index($("#productCategory #pfBody")[0]);var arrayPos=$("#productCategory #"+catSelect).parent().children().index($("#productCategory #"+catSelect)[0]);if(arrayPos==-1){$("div.catHead1").css({marginTop:"0px"});$("#scrollButton").css({backgroundPosition:"0px 0px"});catExpandContract("pfFace","contract");catExpandContract("pfMakeup","contract");catExpandContract("pfHair","contract");catExpandContract("pfBody","contract");}else{if((arrayPos>faceArrayPos)&&(arrayPos<makeupArrayPos)){catExpandContract("pfMakeup","contract");catExpandContract("pfHair","contract");catExpandContract("pfBody","contract");$("#pfFace").css({backgroundImage:"url("+TBContract+")"});}else if((arrayPos>makeupArrayPos)&&(arrayPos<hairArrayPos)){catExpandContract("pfFace","contract");catExpandContract("pfHair","contract");catExpandContract("pfBody","contract");$("#pfMakeup").css({backgroundImage:"url("+TBContract+")"});}else if((arrayPos>hairArrayPos)&&(arrayPos<bodyArrayPos)){catExpandContract("pfFace","contract");catExpandContract("pfMakeup","contract");catExpandContract("pfBody","contract");$("#pfHair").css({backgroundImage:"url("+TBContract+")"});}else if(arrayPos>bodyArrayPos){catExpandContract("pfFace","contract");catExpandContract("pfMakeup","contract");catExpandContract("pfHair","contract");$("#pfBody").css({backgroundImage:"url("+TBContract+")"});}
var tempArray=new Array();var tempScrollHeight=0;for(e=0;e<pfContents.length;e++){if(pfContents[e].css("display")=="block"){tempArray.push(pfContents[e]);}}
for(d=0;d<tempArray.length;d++){if(tempScrollHeight<=maxDisplayed){if(($(tempArray[d]).css("backgroundColor")==selectIEColor)||($(tempArray[d]).css("backgroundColor")==selectColorFF)){break;}
tempScrollHeight+=tempArray[d].height();}else{break;}}
$("div.catHead1").css({marginTop:"-"+tempScrollHeight+"px"});var TempconstVal=maxDisplayed/categoryScrollMax;var scrollerPosition=arrayPos*TempconstVal;scrollerPosition=scrollerPosition.toFixed(0);if(scrollerPosition>scrollBarHeight){$("#scrollButton").css({backgroundPosition:"0px "+scrollBarHeight+"px"});}else{$("#scrollButton").css({backgroundPosition:"0px "+scrollerPosition+"px"});}}}
if(savedCategory){$("#catNavContain").append("<input id=\"categoryIdInput\" type=\"hidden\" name=\"pf[c2]\" value=\""+savedCategory+"\" />");}else{$("#catNavContain").append("<input id=\"categoryIdInput\" type=\"hidden\" name=\"pf[c2]\" value=\"\" />");}
if(("#resetInfo").length>0){$("#resetInfo").click(function(){$('form :input').val("");$("#brandSelected div#selected1").html("");$("#brandSelected div#selected2").html("");$("#brandSelected div#selected3").html("");$("#brandSelected div#selected4").html("");$("#brandSelected div#selected5").html("");$("#itemsSelected").css({display:"none"});$("#brandSelected").css({display:"none"});for(r=0;r<=heightArr.length;r++){$("#productCategory #cat"+r).css({backgroundColor:"",backgroundImage:TBCategoryIndicator});}
$("div.catHead1").css({marginTop:"0px"});$("#scrollButton").css({backgroundPosition:"0px 0px"});slidersReset();$("#searchSubmit select[0]").each(function(){this.selectedIndex=0;});});}
$("#finder #search").click(function(){if($("#categoryIdInput").val()==""){if((TBwrapperClass=="jsInclude1")||(TBwrapperClass=="jsInclude2")||(TBwrapperClass=="stylelistPF")){alert("Please select a category.");return false;}}});$("#scrollDownMax").click(function(){scrollDown(categoryScrollMax);});$("#scrollUpMax").click(function(){scrollUp(0);});$("#scrollDown").click(function(){if(tbBrowserIs=="safari"){redrawElement();}
scrollClick("down");});$("#scrollUp").click(function(){if(tbBrowserIs=="safari"){redrawElement();}
scrollClick("up");});$("#scrollImg").click(function(event){if(tbBrowserIs=="safari"){redrawElement();}
var offset=$("#scrollImg").offset();var newposition=event.pageY-offset.top;constVal=maxDisplayed/categoryScrollMax;if(constVal<0){constVal=0;}
if((newposition<categoryScrollMax-7)&&(newposition>8)){$("#scrollButton").css({backgroundPosition:"0 "+newposition+"px"});var newScrollVal=newposition*constVal;$("div.catHead1").css({marginTop:"-"+newScrollVal+"px"});}else if(newposition<=7){$("#scrollButton").css({backgroundPosition:"0px 0px"});$("div.catHead1").css({marginTop:"0px"});}else{$("#scrollButton").css({backgroundPosition:"0 "+categoryScrollMax+"px"});if(maxDisplayed<0){$("div.catHead1").css({marginTop:"0px"});}else{$("div.catHead1").css({marginTop:"-"+maxDisplayed+"px"});}}});$("#scrollButton").mousedown(function(event){if(tbBrowserIs=="safari"){redrawElement();}
var offset=$("#scrollImg").offset();var newposition=event.pageY-offset.top;mouseDrag=true;$("html").mousemove(function(event){if(tbBrowserIs=="safari"){redrawElement();}
if(mouseDrag==true){var dragPos=event.pageY-offset.top;constVal=maxDisplayed/categoryScrollMax;if(constVal<0){constVal=0;}
if((dragPos<categoryScrollMax)&&(dragPos>0)){$("#scrollButton").css({backgroundPosition:"0 "+dragPos+"px"});var newScrollVal=dragPos*constVal;$("div.catHead1").css({marginTop:"-"+newScrollVal+"px"});}else if(dragPos<=0){$("#scrollButton").css({backgroundPosition:"0px 0px"});$("div.catHead1").css({marginTop:"0px"});}else{$("#scrollButton").css({backgroundPosition:"0 "+categoryScrollMax+"px"});if(maxDisplayed<0){$("div.catHead1").css({marginTop:"0px"});}else{$("div.catHead1").css({marginTop:"-"+maxDisplayed+"px"});}}}});});$("html").mouseup(function(event){mouseDrag=false;});$(PFdivname+" div.catHead1").click(function(){if(faceExpand==1){catExpandContract(this,"contract");}else{catExpandContract(this,"expand");}});$(PFdivname+" #pfMakeup").click(function(){if(makeupExpand==1){catExpandContract(this,"contract");}else{catExpandContract(this,"expand");}});$(PFdivname+" #pfHair").click(function(){if(hairExpand==1){catExpandContract(this,"contract");}else{catExpandContract(this,"expand");}});$(PFdivname+" #pfBody").click(function(){if(bodyExpand==1){catExpandContract(this,"contract");}else{catExpandContract(this,"expand");}});$(PFdivname+" div").mouseover(function(){$(this).each(function(i){var bkgrndColor=$(this).css("background-color");if((bkgrndColor==selectColorFF)||(bkgrndColor==selectIEColor)||($(this).attr("class")=="catHead1")||($(this).attr("class")=="catHead")){return;}else{if((TBwrapperClass=="stylelistPF")||(TBwrapperClass=="stylelistPFb")){$(this).css({textDecoration:"underline"});}else{$(this).css({backgroundColor:hoverColor});}}});});$(PFdivname+" div").click(function(){$(this).each(function(i){var categoryName=$(this).text();if((categoryName=="Face")||(categoryName=="Makeup")||(categoryName=="Hair")||(categoryName=="Body")){return false;}
var divId=$(this).attr("id");var bkgrndColor=$(this).css("background-color");if(categoryName){getCategoryId(categoryName,divId);}
if((bkgrndColor==selectColorFF)||(bkgrndColor==selectIEColor)){$(this).css({backgroundColor:""});$("#categoryIdInput").val("");return;}else{$(this).css({backgroundColor:selectIEColor});if($(this).attr("id")!=catSelect){$(PFdivname+" #"+catSelect).css({backgroundColor:""});if((TBwrapperClass=="stylelistPF")||(TBwrapperClass=="stylelistPFb")){$(PFdivname+" #"+catSelect).css({textDecoration:"none"});}}}
catSelect=$(this).attr("id");});});$(PFdivname+" div").mouseout(function(){$(this).each(function(i){var bkgrndColor=$(this).css("background-color");if((bkgrndColor==selectColorFF)||(bkgrndColor==selectIEColor)||($(this).attr("class")=="catHead1")||($(this).attr("class")=="catHead")){return;}else{if((TBwrapperClass=="stylelistPF")||(TBwrapperClass=="stylelistPFb")){$(this).css({textDecoration:"none"});}else{$(this).css({backgroundColor:""});}}});});function scrollClick(direction){var scrollButtonPos=$("#scrollButton").css("backgroundPosition");if(!scrollButtonPos){scrollButtonPos=" 0px";}
var lastPx=scrollButtonPos.lastIndexOf("px");var space=scrollButtonPos.indexOf(" ");var newPos=parseInt(scrollButtonPos.substring(space,lastPx));if(direction=="down"){newPos+=1;$("#scrollButton").css({backgroundPosition:"0 "+newPos+"px"});}else if(direction=="up"){newPos-=1;$("#scrollButton").css({backgroundPosition:"0 "+newPos+"px"});}
constVal=maxDisplayed/categoryScrollMax;if((newPos<categoryScrollMax)&&(newPos>0)){$("#scrollButton").css({backgroundPosition:"0 "+newPos+"px"});var newScrollVal=newPos*constVal;$("div.catHead1").css({marginTop:"-"+newScrollVal+"px"});}else if(newPos<=0){$("#scrollButton").css({backgroundPosition:"0px 0px"});$("div.catHead1").css({marginTop:"0px"});}else{$("#scrollButton").css({backgroundPosition:"0 "+categoryScrollMax+"px"});if(maxDisplayed<0){$("div.catHead1").css({marginTop:"0px"});}else{$("div.catHead1").css({marginTop:"-"+maxDisplayed+"px"});}}}
function getCategoryId(categoryName,divId){var divnameId=divId.substring(3,divId.length);divnameId=parseInt(divnameId);$("#categoryIdInput").val(divnameId);if(($("#"+divId).css("background-color")=="transparent")||($("#"+divId).css("background-color")==hoverColor)||($("#"+divId).css("background-color")==hoverFF)){if($("#productBrands").length>0){loadBrands("current",divnameId);}}else{if($("#productBrands").length>0){loadBrands("current","full");}}}
if(savedCategory){loadBrands("previous",savedCategory);}
function loadBrands(type,catId){var newCSV;var csvLocation="/func/getBrandsFromSubcategory.php?sc="+catId;var brandContent=$.ajax({type:"POST",url:csvLocation,success:function(msg){newCSV=msg;},async:false}).responseText;newCSV=newCSV.replace(/\n/g,"");var newSplit=newCSV.split(";;");if(catId=="full"){pfBrandArray=brandArray;}else{pfBrandArray=newSplit[0].split(";");}
brandNames="";for(g=0;g<pfBrandArray.length;g++){brandNames+=pfBrandArray[g]+";";}
var brandCount=0;for(p=1;p<6;p++){if($("#brandSelected div#selected"+p).text()){brandCount++;}
if(brandNames.indexOf($("#brandSelected div#selected"+p).text())==-1){$("#brandSelected div#selected"+p).html("");$("#br"+p).val("");$("#brandSelected div#selected"+p).css({display:"none"});brandCount--;}}
if(brandCount==0){$("#itemsSelected").css({display:"none"});$("#brandSelected").css({display:"none"});}}
$("#productBrands #searchStr").focus(function(){$("#productBrands #searchStr").removeClass("searchDefault");$("#productBrands #searchStr").addClass("searchRegular");});$("body").click(function(){if(showBrands==false){$("#brands").css({display:"none"});}else{$("#brands").css({display:"block"});}
showBrands=false;});$("#brands").click(function(){showBrands=true;});$("#searchStr").click(function(){if($(this).val()){$(this).val("");}
var inputLeft=findPosX(this);var inputTop=findPosY(this);if((tbBrowserIs=="ie")&&(tbBrowserVersion<7)){$("#brands").css({left:"16px",top:"365px"});}else{$("#brands").css({left:inputLeft,top:(inputTop+18)});}
showBrands=true;showResults("productBrands");});for(w=1;w<=selectTotal;w++){$("#brandSelected div#selected"+w).click(function(){var selectedID=$(this).attr("id");var selectContent=$("#"+selectedID+" div.selectedBrands").html();for(p=0;p<brandArray.length;p++){if(brandArray[p]==selectContent){brandId=brandIdArr[p];break;}}
for(g=1;g<=5;g++){if(brandId==$("#br"+g).val()){$("#br"+g).val("");}}
$(this).html("");if(($("#brandSelected div#selected1").html()=="")&&($("#brandSelected div#selected2").html()=="")&&($("#brandSelected div#selected3").html()=="")&&($("#brandSelected div#selected4").html()=="")&&($("#brandSelected div#selected5").html()=="")){$("#itemsSelected").css({display:"none"});$("#brandSelected").css({display:"none"});}});$("#brandSelected div#selected"+w).mouseover(function(){$(this).css("color","red");});$("#brandSelected div#selected"+w).mouseout(function(){$(this).css("color","black");});}
function showResults(divname){var divParent;if(divname=="productBrands"){divParent=divname;divname="brands";listContent=brandNames;}
$("#"+divname).html("");var re="";var returnStr="";var searchStr=$("#"+divParent+" #searchStr").val();if(searchStr.length==0){$("#"+divname).css({display:"none"});}else{$("#"+divname).css({display:"block"});}
var firstCheck=searchStr.substring(0,1);re=new RegExp("\^"+searchStr,"gi");var match=re.exec(listContent);if(match){var findStart=listContent.indexOf(match);var newStart=findStart;var finalStr="";for(x=0;x<resultsNum;x++){var test=listContent.indexOf(";",newStart);newStart=test+1;if(test==-1){finalStr=listContent.substring(findStart,listContent.length);break;}
else{if(x==(resultsNum-1)){finalStr=listContent.substring(findStart,test);}}}}else{re=new RegExp("\;"+searchStr,"gi");var subMatch=re.exec(listContent);if(subMatch){var findStart=listContent.indexOf(subMatch);var newStart=findStart;var finalStr="";for(x=0;x<resultsNum;x++){var test=listContent.indexOf(";",newStart);newStart=test+1;if(test==-1){finalStr=listContent.substring(findStart,listContent.length);break;}
else{if(x==(resultsNum-1)){finalStr=listContent.substring(findStart+1,test);}}}}else{$("#"+divname).html("Sorry, no brands found.");return;}}
var finalArray=finalStr.split(";");var outputContent="";for(y=0;y<finalArray.length;y++){var editVal=y+1;outputContent+="<div id='brand"+editVal+"' class='brandDiv'>"+finalArray[y]+"</div>";}
$("#"+divname).html(outputContent);resultsNumAlt=finalArray.length-1;for(y=0;y<finalArray.length;y++){for(u=1;u<=selectTotal;u++){var brand=$("#brandSelected div#selected"+u+" div.selectedBrands").html();if(finalArray[y]==brand){$("#"+divname+" #brand"+(y+1)).css({background:selectIEColor});}}}
for(x=0;x<=resultsNum;x++){$("#"+divname+" #brand"+x).mouseover(function(){if(($(this).css("background-color")==selectColorFF)||($(this).css("background-color")==selectIEColor)){return;}else{$(this).css({background:hoverColor});}});$("#"+divname+" #brand"+x).mouseout(function(){if(($(this).css("background-color")==selectColorFF)||($(this).css("background-color")==selectIEColor)){return;}else{$(this).css({background:""});}});$("#"+divname+" #brand"+x).click(function(){if(($(this).css("background-color")==selectColorFF)||($(this).css("background-color")==selectIEColor)){return false;}else{$(this).css({background:selectIEColor});$("#brandSelected").css({display:"block"});}
var contents=$(this).html();contents="<div class='cancelImg'><img src='http://images.totalbeauty.com/img/v5/productFinderCancel.gif' class='cancelSelect' /></div><div class='selectedBrands'>"+contents+"</div>";for(u=1;u<=selectTotal;u++){if($("#brandSelected div#selected"+u).html()==""){$("#brandSelected div#selected"+u).html(contents);$("#brandSelected div#selected"+u).css({display:"block"});break;}
if(u==selectTotal){$(this).css({background:""});alert("You can only select 5 Brands at a time");}}
selectNum=countOpenSlots();getBrandId(finalArray);});}}
function checkKeyCode(e,divname){var keynum;if(window.event)
{keynum=e.keyCode;}else if(e.which)
{keynum=e.which;}
keychar=String.fromCharCode(keynum);if((keynum>=48)&&(keynum<=57)){showResults(divname);}else if((keynum>=65)&&(keynum<=90)){showResults(divname);}else if((keynum>=86)&&(keynum<=105)){showResults(divname);}else if(keynum==8){showResults(divname);}else if(keynum==190){showResults(divname);}else if(keynum==13){$("form.productFinder").submit(function(){return false;});}
if(keynum==40){for(r=1;r<=resultsNum;r++){if(($("#brand"+r).css("background-color")!=selectColorFF)&&($("#brand"+r).css("background-color")!=selectColor)){$("#brand"+r).css({background:""});}}
if(arrowScroll<resultsNumAlt+1){arrowScroll++;}else{arrowScroll=1;}
if(($("#brand"+arrowScroll).css("background-color")!=selectColorFF)&&($("#brand"+arrowScroll).css("background-color")!=selectColor)){$("#brand"+arrowScroll).css({background:hoverColor});}}else if(keynum==38){for(r=0;r<resultsNum;r++){if(($("#brand"+r).css("background-color")!=selectColorFF)&&($("#brand"+r).css("background-color")!=selectColor)){$("#brand"+r).css({background:""});}}
if((arrowScroll<=resultsNumAlt+1)&&(arrowScroll>1)){arrowScroll--;}else{arrowScroll=resultsNumAlt+1;}
if(($("#brand"+arrowScroll).css("background-color")!=selectColorFF)&&($("#brand"+arrowScroll).css("background-color")!=selectColor)){$("#brand"+arrowScroll).css({background:hoverColor});}}}
function countOpenSlots(){var count=0;for(x=1;x<=selectTotal;x++){if($("#selected"+x).html()!=""){count=x;}}
return count;}
function getBrandId(){var brand="";var brandId="";for(r=1;r<=5;r++){brand=$("#brandSelected div#selected"+r+" div.selectedBrands").text();if(brand){for(p=0;p<brandArray.length;p++){if(brandArray[p]==brand){brandId=brandIdArr[p];$("#br"+r).val(brandId);break;}}}}}
function findPosX(obj){var curleft=0;if(obj.offsetParent)
while(1)
{curleft+=obj.offsetLeft;if(!obj.offsetParent)
break;obj=obj.offsetParent;}
else if(obj.x)
curleft+=obj.x;return curleft;}
function findPosY(obj){var curtop=0;if(obj.offsetParent)
while(1)
{curtop+=obj.offsetTop;if(!obj.offsetParent)
break;obj=obj.offsetParent;}
else if(obj.y)
curtop+=obj.y;return curtop;}
function catExpandContract(catObj,method,defaultExpand){if(tbBrowserIs=="safari"){redrawElement();}
var catObjId;if((catObj=="pfFace")||(catObj=="pfMakeup")||(catObj=="pfHair")||(catObj=="pfBody")){catObjId=catObj;}else{catObjId=$(catObj).attr("id");}
switch(method){case"contract":{if(catObj=="all"){var pageLocation=unescape(document.location.href);if(pageLocation.indexOf("?")==-1){var tempArray=new Array();var tempScrollHeight=0;for(e=0;e<pfContents.length;e++){var contentId=pfContents[e].attr("id");tempScrollHeight+=pfContents[e].height()+parseInt(pfContents[e].css("padding-top"))+parseInt(pfContents[e].css("padding-bottom"));if((pfContents[e].attr("id")!="pfFace")&&(pfContents[e].attr("id")!="pfMakeup")&&(pfContents[e].attr("id")!="pfHair")&&(pfContents[e].attr("id")!="pfBody")){tempArray.push(pfContents[e].attr("id"));}else{faceExpand=0;makeupExpand=0;hairExpand=0;bodyExpand=0;$("#"+contentId).css({backgroundImage:"url("+TBExpand+")"});}}
var temp=0;var testTemp=0;for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"block"});}
for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"none"});temp=$("#"+tempArray[p]).height()+parseInt($("#"+tempArray[p]).css("padding-top"))+parseInt($("#"+tempArray[p]).css("padding-bottom"));testTemp+=temp;}
maxDisplayed-=tempScrollHeight;maxDisplayed+=60;}}else{if(catObjId=="pfFace"){var tempArray=new Array();var tempScrollHeight=0;for(e=1;e<pfContents.length;e++){tempScrollHeight+=pfContents[e].height()+parseInt(pfContents[e].css("padding-top"))+parseInt(pfContents[e].css("padding-bottom"));if(pfContents[e].text()=="Makeup"){break;}else{tempArray.push(pfContents[e].attr("id"));}}
var temp=0;var testTemp=0;for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"block"});}
$("#"+catObjId).css({backgroundImage:"url("+TBExpand+")"});for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"none"});temp=$("#"+tempArray[p]).height()+parseInt($("#"+tempArray[p]).css("padding-top"))+parseInt($("#"+tempArray[p]).css("padding-bottom"));testTemp+=temp;}
maxDisplayed-=tempScrollHeight;maxDisplayed+=15;faceExpand=0;}else if(catObjId=="pfMakeup"){var tempArray=new Array();var tempScrollHeight=0;for(e=makeupPos+1;e<pfContents.length;e++){tempScrollHeight+=pfContents[e].height()+parseInt(pfContents[e].css("padding-top"))+parseInt(pfContents[e].css("padding-bottom"));if(pfContents[e].text()=="Hair"){break;}else{tempArray.push(pfContents[e].attr("id"));}}
$("#"+catObjId).css({backgroundImage:"url("+TBExpand+")"});for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"none"});}
maxDisplayed-=tempScrollHeight;maxDisplayed+=15;makeupExpand=0;}else if(catObjId=="pfHair"){var tempArray=new Array();var tempScrollHeight=0;for(e=hairPos+1;e<pfContents.length;e++){tempScrollHeight+=pfContents[e].height()+parseInt(pfContents[e].css("padding-top"))+parseInt(pfContents[e].css("padding-bottom"));if(pfContents[e].text()=="Body"){break;}else{tempArray.push(pfContents[e].attr("id"));}}
$("#"+catObjId).css({backgroundImage:"url("+TBExpand+")"});for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"none"});}
maxDisplayed-=tempScrollHeight;maxDisplayed+=15;hairExpand=0;}else if(catObjId=="pfBody"){var tempArray=new Array();var tempScrollHeight=0;for(e=bodyPos+1;e<pfContents.length;e++){tempScrollHeight+=pfContents[e].height()+parseInt(pfContents[e].css("padding-top"))+parseInt(pfContents[e].css("padding-bottom"));tempArray.push(pfContents[e].attr("id"));}
$("#"+catObjId).css({backgroundImage:"url("+TBExpand+")"});for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"none"});}
maxDisplayed-=tempScrollHeight;maxDisplayed+=15;bodyExpand=0;}}}break;case"expand":{if(catObjId=="pfFace"){var tempArray=new Array();var tempScrollHeight=0;for(e=1;e<pfContents.length;e++){tempScrollHeight+=pfContents[e].height()+parseInt(pfContents[e].css("padding-top"))+parseInt(pfContents[e].css("padding-bottom"));if(pfContents[e].text()=="Makeup"){break;}else{tempArray.push(pfContents[e].attr("id"));}}
var temp=0;var testTemp=0;for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"block"});}
$("#"+catObjId).css({backgroundImage:"url("+TBContract+")"});if(maxDisplayed<saveMaxDisplayed){maxDisplayed+=tempScrollHeight;maxDisplayed-=15;}
faceExpand=1;}else if(catObjId=="pfMakeup"){var tempArray=new Array();var tempScrollHeight=0;for(e=makeupPos+1;e<pfContents.length;e++){tempScrollHeight+=pfContents[e].height()+parseInt(pfContents[e].css("padding-top"))+parseInt(pfContents[e].css("padding-bottom"));if(pfContents[e].text()=="Hair"){break;}else{tempArray.push(pfContents[e].attr("id"));}}
for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"block"});}
$("#"+catObjId).css({backgroundImage:"url("+TBContract+")"});if(maxDisplayed<saveMaxDisplayed){maxDisplayed+=tempScrollHeight;maxDisplayed-=15;}
makeupExpand=1;}else if(catObjId=="pfHair"){var tempArray=new Array();var tempScrollHeight=0;for(e=hairPos+1;e<pfContents.length;e++){tempScrollHeight+=pfContents[e].height()+parseInt(pfContents[e].css("padding-top"))+parseInt(pfContents[e].css("padding-bottom"));if(pfContents[e].text()=="Body"){break;}else{tempArray.push(pfContents[e].attr("id"));}}
for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"block"});}
$("#"+catObjId).css({backgroundImage:"url("+TBContract+")"});if(maxDisplayed<saveMaxDisplayed){maxDisplayed+=tempScrollHeight;maxDisplayed-=15;}
hairExpand=1;}else if(catObjId=="pfBody"){var tempArray=new Array();var tempScrollHeight=0;for(e=bodyPos+1;e<pfContents.length;e++){tempScrollHeight+=pfContents[e].height()+parseInt(pfContents[e].css("padding-top"))+parseInt(pfContents[e].css("padding-bottom"));tempArray.push(pfContents[e].attr("id"));}
for(p=0;p<tempArray.length;p++){$(PFdivname+" #"+tempArray[p]).css({display:"block"});}
$("#"+catObjId).css({backgroundImage:"url("+TBContract+")"});if(maxDisplayed<saveMaxDisplayed){maxDisplayed+=tempScrollHeight;maxDisplayed-=15;}
bodyExpand=1;}}break;}
if(defaultExpand){catExpandContract(defaultExpand,"expand");}}
function redrawElement(){var divOffset=$(PFdivname).offset();if($("#pfOverlay").length>0){$("#pfOverlay").css({backgroundColor:"transparent",position:"absolute",top:divOffset.top+"px",left:divOffset.left+"px",width:$(PFdivname).width()+"px",height:$(PFdivname).height()+"px",visibility:"visible"});}else{$("body").append("<div id=\"pfOverlay\"></div>");$("#pfOverlay").css({backgroundColor:"transparent",position:"absolute",top:divOffset.top+"px",left:divOffset.left+"px",width:$(PFdivname).width()+"px",height:$(PFdivname).height()+"px",visibility:"visible"});}
setTimeout("removeOverlay()",1);}
function removeOverlay(){$("#pfOverlay").css({visibility:"hidden"});}
function loadPFControls(event){if(event.type=="mouseover"){var targetId=event.target.id;var parentId=$("#"+targetId).parent().attr("id");if((parentId!="productBrands")&&(parentId!="brands")){$("#brands").css({display:"none"});}}}