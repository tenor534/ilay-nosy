csvInput=csvInput.replace(/\n/g,"");var firstSplit=csvInput.split(";;");var brandArray=firstSplit[0].split(";");var brandIdArr=firstSplit[1].split(";");var brandHref=firstSplit[2].split(";");var catArray=firstSplit[3].split(";");var catIdArr=firstSplit[4].split(";");var catHref=firstSplit[5].split(";");var hotBrands=firstSplit[6].split(";");var hotIds=firstSplit[7].split(";");var hotHref=firstSplit[8].split(";");var pfBrandArray=firstSplit[0].split(";");var arraySetup=true;var hoverColor="#ffeea6";var selectIEColor="#caf0ff";var selectColorFF="rgb(202, 240, 255)";var selectColor="#caf0ff";var hoverFF="rgb(255, 238, 166)";var finderElement=document.getElementById('catNavContain');finderElement.onselectstart=function(){return false;}
var heightArr=new Array();var maxHeight=0;var maxDisplayed=0;var maxAdjust=13;var categoryNum;var categoryId=0;var categoryType="";var savePosition=0;var constVal=0;var mouseDrag=false;var catSelect=0;var categoryScrollMax=145;var scrollBarHeight=162;var PFdivname="#productCategory";$(PFdivname+" div").each(function(i){var divElementH=($(this).height());var divElement=($(this).html());heightArr.push(divElementH);maxHeight+=divElementH;categoryNum=i;});var maxHeightNum=categoryNum-maxAdjust;jQuery.grep(heightArr,function(n,i){if(i<=maxHeightNum+1){maxDisplayed+=n;}});constVal=scrollBarHeight/heightArr.length;constVal=constVal.toString();var decimalPos=constVal.indexOf(".");if(decimalPos!=-1){var finalVal=constVal.substring(0,(decimalPos+3));finalVal=parseFloat(finalVal);constVal=finalVal;}else{constVal=parseInt(constVal);}
var brandNames="";for(g=0;g<brandArray.length;g++){brandNames+=brandArray[g]+";";}
var resultsNum=10;var resultsNumAlt=0;var selectNum=0;var selectTotal=5;var listContent="";var arrowScroll=0;var showBrands=false;$("#productBrands #searchStr").val("Submit 1 name at a time");var pageLocation=unescape(document.location.href);if(pageLocation.indexOf("?")!=-1){var urlArr=pageLocation.split("&");for(t=0;t<urlArr.length;t++){var startBracket=urlArr[t].indexOf("[");var endBracket=urlArr[t].indexOf("]");var formName=urlArr[t].substring(startBracket+1,endBracket);if(formName){var formVal=urlArr[t].substring((urlArr[t].indexOf("=")+1),urlArr[t].length);}
if(formVal){switch(formName)
{case"ex_in":break;case"in_ga":break;case"br1":{var brand1=formVal;break;}
case"br2":{var brand2=formVal;break;}
case"br3":{var brand3=formVal;break;}
case"br4":{var brand4=formVal;break;}
case"br5":{var brand5=formVal;break;}
case"c2":{var savedCategory=formVal;break;}
case"slide1":{var slider1=formVal;break;}
case"slide2":{var slider2=formVal;break;}
case"slide3":{var slider3=formVal;break;}
case"slide4":{var slider4=formVal;break;}
case"slide5":{var slider5=formVal;break;}
case"slide6":{var slider6=formVal;break;}
case"n_pr":{formVal="$"+formVal;$("#minPrice").text(formVal);break;}
case"x_pr":{formVal="$"+formVal;$("#maxPrice").text(formVal);break;}
case"n_tr":{$("#minRating").text(formVal);break;}
case"x_tr":{$("#maxRating").text(formVal);break;}
case"n_ur":{$("#minMember").text(formVal);break;}
case"x_ur":{$("#maxMember").text(formVal);break;}
default:break;}}}
for(p=0;p<brandIdArr.length;p++){var selectedContent="<div class='cancelImg'><img src='http://images.totalbeauty.com/img/v5/productFinderCancel.gif' class='cancelSelect' /></div><div class='selectedBrands'>"+brandArray[p]+"</div>"
if(brandIdArr[p]==brand1){$("#brandSelected").css({display:"block"});$("#brandSelected div#selected1").html(selectedContent);$("#brandSelected div#selected1").css({display:"block"});$("#br1").val(brand1);}else if(brandIdArr[p]==brand2){if($("#brandSelected").css("display")!="block"){$("#brandSelected").css({display:"block"});}
$("#brandSelected div#selected2").html(selectedContent);$("#brandSelected div#selected2").css({display:"block"});$("#br2").val(brand2);}else if(brandIdArr[p]==brand3){if($("#brandSelected").css("display")!="block"){$("#brandSelected").css({display:"block"});}
$("#brandSelected div#selected3").html(selectedContent);$("#brandSelected div#selected3").css({display:"block"});$("#br3").val(brand3);}else if(brandIdArr[p]==brand4){if($("#brandSelected").css("display")!="block"){$("#brandSelected").css({display:"block"});}
$("#brandSelected div#selected4").html(selectedContent);$("#brandSelected div#selected4").css({display:"block"});$("#br4").val(brand4);}else if(brandIdArr[p]==brand5){if($("#brandSelected").css("display")!="block"){$("#brandSelected").css({display:"block"});}
$("#brandSelected div#selected5").html(selectedContent);$("#brandSelected div#selected5").css({display:"block"});$("#br5").val(brand5);}}
$("#categoryIdInput").val(savedCategory);var catSelect="cat"+savedCategory;for(g=0;g<catIdArr.length;g++){if(catIdArr[g]==savedCategory){var categoryName=catArray[g];break;}}
$("#productCategory #"+catSelect).css({backgroundColor:selectIEColor});var arrayPos=$("#productCategory #"+catSelect).parent().children().index($("#productCategory #"+catSelect)[0]);var marginValue=0;for(r=0;r<arrayPos;r++){if(arrayPos>(heightArr.length-maxAdjust)){marginValue=maxDisplayed;$("#scrollButton").css({backgroundPosition:"0px "+categoryScrollMax+"px"});$("div.catHead1").css({marginTop:"-"+marginValue+"px"});break;}else{marginValue+=heightArr[r];var scrollerPosition=arrayPos*constVal;scrollerPosition=scrollerPosition.toFixed(0);$("#scrollButton").css({backgroundPosition:"0px "+scrollerPosition+"px"});}}
$("div.catHead1").css({marginTop:"-"+marginValue+"px"});if(!slider1){var slider1="0px";}if(!slider2){var slider2="139px";}if(!slider3){var slider3="0px";}if(!slider4){var slider4="139px";}if(!slider5){var slider5="0px";}if(!slider6){var slider6="139px";}
slider1=parseInt(slider1);slider2=parseInt(slider2);slider3=parseInt(slider3);slider4=parseInt(slider4);slider5=parseInt(slider5);slider6=parseInt(slider6);$("#slider1 #leftHandle1").css({left:slider1+"px"});$("#slider1 #rightHandle1").css({left:slider2+"px"});$("#slider2 #leftHandle2").css({left:slider3+"px"});$("#slider2 #rightHandle2").css({left:slider4+"px"});$("#slider3 #leftHandle3").css({left:slider5+"px"});$("#slider3 #rightHandle3").css({left:slider6+"px"});$("#highlight1").css({width:(slider2-slider1)+13+"px",left:slider1+"px"});$("#highlight2").css({width:(slider4-slider3)+13+"px",left:slider3+"px"});$("#highlight3").css({width:(slider6-slider5)+13+"px",left:slider5+"px"});var tempPrice=parseInt($("#leftHandle1").css("left"));if(tempPrice<6){$("#minPrice").css({left:"0px"});}else{$("#minPrice").css({left:slider1-7+"px"});$("#maxPrice").css({left:slider2-7+"px"});}
$("#minRating").css({left:slider3+"px"});$("#maxRating").css({left:slider4+"px"});$("#minMember").css({left:slider5+"px"});$("#maxMember").css({left:slider6+"px"});if((slider1<10)&&(slider2<10)){$("#slider1 #rightHandle1").css({zIndex:"2"});$("#slider1 #leftHandle1").css({zIndex:"1"});$("#minPrice").css({left:slider1+"px"});$("#maxPrice").css({left:slider2+"px"});}else{$("#slider1 #rightHandle1").css({zIndex:"1"});$("#slider1 #leftHandle1").css({zIndex:"2"});}
if((slider3<2)&&(slider4<2)){$("#slider2 #rightHandle2").css({zIndex:"2"});$("#slider2 #leftHandle2").css({zIndex:"1"});}else{$("#slider2 #rightHandle2").css({zIndex:"1"});$("#slider2 #leftHandle2").css({zIndex:"2"});}
if((slider5<2)&&(slider6<2)){$("#slider3 #rightHandle3").css({zIndex:"2"});$("#slider3 #leftHandle3").css({zIndex:"1"});}else{$("#slider3 #rightHandle3").css({zIndex:"1"});$("#slider3 #leftHandle3").css({zIndex:"2"});}}
if(savedCategory){$("#catNavContain").append("<input id=\"categoryIdInput\" type=\"hidden\" name=\"pf[c2]\" value=\""+savedCategory+"\" />");}else{$("#catNavContain").append("<input id=\"categoryIdInput\" type=\"hidden\" name=\"pf[c2]\" value=\"\" />");}
if(("#resetInfo").length>0){$("#resetInfo").click(function(){$('form :input').val("");$("#brandSelected div#selected1").html("");$("#brandSelected div#selected2").html("");$("#brandSelected div#selected3").html("");$("#brandSelected div#selected4").html("");$("#brandSelected div#selected5").html("");$("#itemsSelected").css({display:"none"});$("#brandSelected").css({display:"none"});for(r=0;r<=heightArr.length;r++){$("#productCategory #cat"+r).css({backgroundColor:"",backgroundImage:"url(http://images.totalbeauty.com/img/v5/productFinderIndicator.gif)"});}
$("#slider1 #leftHandle1").css({left:"0px"});$("#slider1 #rightHandle1").css({left:"139px"});$("#slider1 #highlight1").css({left:"0px",width:"152px"});$("#slider2 #leftHandle2").css({left:"0px"});$("#slider2 #rightHandle2").css({left:"139px"});$("#slider2 #highlight2").css({left:"0px",width:"152px"});$("#slider3 #leftHandle3").css({left:"0px"});$("#slider3 #rightHandle3").css({left:"139px"});$("#slider3 #highlight3").css({left:"0px",width:"152px"});$("#minPrice").html("$0");$("#minPrice").css({left:"0px"});$("#maxPrice").html("$300");$("#maxPrice").css({left:"129px"});$("#minRating").html("0");$("#minRating").css({left:"0px"});$("#maxRating").html("10");$("#maxRating").css({left:"139px"});$("#minMember").html("0");$("#minMember").css({left:"0px"});$("#maxMember").html("10");$("#maxMember").css({left:"139px"});$("#searchSubmit select[0]").each(function(){this.selectedIndex=0;});});}
$("#advancedSearch a").click(function(){$("#searchSubmit").append("<input id=\"lowPrice\" type=\"hidden\" name=\"pf[slide1]\" value=\""+$("#slider1 #leftHandle1").css("left")+"\" />");$("#searchSubmit").append("<input id=\"highPrice\" type=\"hidden\" name=\"pf[slide2]\" value=\""+$("#slider1 #rightHandle1").css("left")+"\" />");$("#searchSubmit").append("<input id=\"lowTb\" type=\"hidden\" name=\"pf[slide3]\" value=\""+$("#slider2 #leftHandle2").css("left")+"\" />");$("#searchSubmit").append("<input id=\"highTb\" type=\"hidden\" name=\"pf[slide4]\" value=\""+$("#slider2 #rightHandle2").css("left")+"\" />");$("#searchSubmit").append("<input id=\"lowUser\" type=\"hidden\" name=\"pf[slide5]\" value=\""+$("#slider3 #leftHandle3").css("left")+"\" />");$("#searchSubmit").append("<input id=\"highUser\" type=\"hidden\" name=\"pf[slide6]\" value=\""+$("#slider3 #rightHandle3").css("left")+"\" />");$("form.productFinder").submit();});$("#finder #search").click(function(){$("#searchSubmit").append("<input id=\"lowPrice\" type=\"hidden\" name=\"pf[slide1]\" value=\""+$("#slider1 #leftHandle1").css("left")+"\" />");$("#searchSubmit").append("<input id=\"highPrice\" type=\"hidden\" name=\"pf[slide2]\" value=\""+$("#slider1 #rightHandle1").css("left")+"\" />");$("#searchSubmit").append("<input id=\"lowTb\" type=\"hidden\" name=\"pf[slide3]\" value=\""+$("#slider2 #leftHandle2").css("left")+"\" />");$("#searchSubmit").append("<input id=\"highTb\" type=\"hidden\" name=\"pf[slide4]\" value=\""+$("#slider2 #rightHandle2").css("left")+"\" />");$("#searchSubmit").append("<input id=\"lowUser\" type=\"hidden\" name=\"pf[slide5]\" value=\""+$("#slider3 #leftHandle3").css("left")+"\" />");$("#searchSubmit").append("<input id=\"highUser\" type=\"hidden\" name=\"pf[slide6]\" value=\""+$("#slider3 #rightHandle3").css("left")+"\" />");});$("#finder #search").mouseover(function(){$(this).attr("src","http://images.totalbeauty.com/img/v5/productFinderSearchHover.gif");});$("#finder #search").mouseout(function(){$(this).attr("src","http://images.totalbeauty.com/img/v5/productFinderSearchInit.gif");});$("#scrollDownMax").click(function(){scrollDown(categoryScrollMax);});$("#scrollUpMax").click(function(){scrollUp(0);});$("#scrollDown").click(function(){scrollClick("down");});$("#scrollUp").click(function(){scrollClick("up");});$("#scrollImg").click(function(event){var offset=$("#scrollImg").offset();var newposition=event.pageY-offset.top;if(savePosition<newposition){scrollDown(newposition);}else{scrollUp(newposition);}
savePosition=newposition;if(newposition<categoryScrollMax){$("#scrollButton").css({backgroundPosition:"0 "+newposition+"px"});}else{$("#scrollButton").css({backgroundPosition:"0 "+categoryScrollMax+"px"});}});$("#scrollButton").mousedown(function(event){var offset=$("#scrollImg").offset();var newposition=event.pageY-offset.top;mouseDrag=true;$("html").mousemove(function(event){if(mouseDrag==true){var dragPos=event.pageY-offset.top;if(savePosition<dragPos){scrollDown(dragPos);}else{scrollUp(dragPos);}
savePosition=dragPos;if((dragPos<categoryScrollMax)&&(dragPos>0)){$("#scrollButton").css({backgroundPosition:"0 "+dragPos+"px"});}else if(dragPos<=0){$("#scrollButton").css({backgroundPosition:"0px 0px"});}else{$("#scrollButton").css({backgroundPosition:"0 "+categoryScrollMax+"px"});}}});});$("html").mouseup(function(event){mouseDrag=false;});$(PFdivname+" div").mouseover(function(){$(this).each(function(i){var bkgrndColor=$(this).css("background-color");if((bkgrndColor==selectColorFF)||(bkgrndColor==selectIEColor)||($(this).attr("class")=="catHead1")||($(this).attr("class")=="catHead")){return;}else{$(this).css({backgroundColor:hoverColor});}});});$(PFdivname+" div").click(function(){$(this).each(function(i){var categoryName=$(this).text();if((categoryName=="Face")||(categoryName=="Makeup")||(categoryName=="Hair")||(categoryName=="Body")){return false;}
var divId=$(this).attr("id");var bkgrndColor=$(this).css("background-color");if(categoryName){getCategoryId(categoryName,divId);}
if((bkgrndColor==selectColorFF)||(bkgrndColor==selectIEColor)){$(this).css({backgroundColor:""});$("#categoryIdInput").val("");return;}else{$(this).css({backgroundColor:selectIEColor});if($(this).attr("id")!=catSelect){$(PFdivname+" #"+catSelect).css({backgroundColor:""});}}
catSelect=$(this).attr("id");});});$(PFdivname+" div").mouseout(function(){$(this).each(function(i){var bkgrndColor=$(this).css("background-color");if((bkgrndColor==selectColorFF)||(bkgrndColor==selectIEColor)||($(this).attr("class")=="catHead1")||($(this).attr("class")=="catHead")){return;}else{$(this).css({backgroundColor:""});}});});function scrollUp(categoryScrollPos){var arrayPos=0;if(categoryScrollPos>categoryScrollMax){categoryScrollPos=categoryScrollMax;}
arrayPos=categoryScrollPos/constVal;arrayPos=arrayPos.toFixed(0);var marginValue=0;for(t=0;t<arrayPos;t++){if(arrayPos>(heightArr.length-maxAdjust)){marginValue=maxDisplayed;break;}else{marginValue+=heightArr[t];}}
$("div.catHead1").css({marginTop:"-"+marginValue+"px"});var nextcategoryScrollPos=arrayPos*constVal;nextcategoryScrollPos=nextcategoryScrollPos.toFixed(0);$("#scrollButton").css({backgroundPosition:"0 "+nextcategoryScrollPos+"px"});}
function scrollDown(categoryScrollPos){var arrayPos=0;if(categoryScrollPos>categoryScrollMax){categoryScrollPos=categoryScrollMax;}
arrayPos=categoryScrollPos/constVal;arrayPos=arrayPos.toFixed(0);var marginValue=0;for(t=0;t<arrayPos;t++){if(arrayPos>(heightArr.length-maxAdjust)){marginValue=maxDisplayed;break;}else{marginValue+=heightArr[t];}}
$("div.catHead1").css({marginTop:"-"+marginValue+"px"});var nextcategoryScrollPos=arrayPos*constVal;nextcategoryScrollPos=nextcategoryScrollPos.toFixed(0);$("#scrollButton").css({backgroundPosition:"0 "+nextcategoryScrollPos+"px"});}
function scrollClick(direction){var scrollButtonPos=$("#scrollButton").css("backgroundPosition");var topMargin=$("div.catHead1").css("marginTop");var newMarginTop=parseInt(topMargin);var arrayPosition=0;var testVal=0;var arrayNumP1=0;var scrollupVal=0;var scrolldownVal=0;for(p=0;p<heightArr.length;p++){if(testVal+"px"==topMargin){arrayPosition=p;scrollupVal=heightArr[p-1];scrolldownVal=heightArr[p];break;}else{if(p==(heightArr.length-1)){}
testVal-=heightArr[p];}}
if(direction=="down"){if(arrayPosition<(heightArr.length-10)){var topMarginVal=scrolldownVal-newMarginTop;$("div.catHead1").css({marginTop:"-"+topMarginVal+"px"});var nextcategoryScrollPos=arrayPosition*constVal;nextcategoryScrollPos=nextcategoryScrollPos.toFixed(0);$("#scrollButton").css({backgroundPosition:"0 "+nextcategoryScrollPos+"px"});}}else if(direction=="up"){var topMarginVal=newMarginTop+scrollupVal;$("div.catHead1").css({marginTop:topMarginVal+"px"});var nextcategoryScrollPos=arrayPosition*constVal;nextcategoryScrollPos=nextcategoryScrollPos.toFixed(0);$("#scrollButton").css({backgroundPosition:"0 "+nextcategoryScrollPos+"px"});}}
function getCategoryId(categoryName,divId){var divnameId=divId.substring(3,divId.length);divnameId=parseInt(divnameId);$("#categoryIdInput").val(divnameId);if(($("#"+divId).css("background-color")=="transparent")||($("#"+divId).css("background-color")==hoverColor)||($("#"+divId).css("background-color")==hoverFF)){if($("#productBrands").length>0){loadBrands("current",divnameId);}}else{if($("#productBrands").length>0){loadBrands("current","full");}}}
if(savedCategory){loadBrands("previous",savedCategory);}
function loadBrands(type,catId){var newCSV;var csvLocation="/func/getBrandsFromSubcategory.php?sc="+catId;var brandContent=$.ajax({type:"POST",url:csvLocation,success:function(msg){newCSV=msg;},async:false}).responseText;newCSV=newCSV.replace(/\n/g,"");var newSplit=newCSV.split(";;");if(catId=="full"){pfBrandArray=brandArray;}else{pfBrandArray=newSplit[0].split(";");}
brandNames="";for(g=0;g<pfBrandArray.length;g++){brandNames+=pfBrandArray[g]+";";}
var brandCount=0;for(p=1;p<6;p++){if($("#brandSelected div#selected"+p).text()){brandCount++;}
if(brandNames.indexOf($("#brandSelected div#selected"+p).text())==-1){$("#brandSelected div#selected"+p).html("");$("#br"+p).val("");$("#brandSelected div#selected"+p).css({display:"none"});brandCount--;}}
if(brandCount==0){$("#itemsSelected").css({display:"none"});$("#brandSelected").css({display:"none"});}}
$("#productBrands #searchStr").focus(function(){$("#productBrands #searchStr").removeClass("searchDefault");$("#productBrands #searchStr").addClass("searchRegular");});$("body").click(function(){if(showBrands==false){$("#brands").css({display:"none"});}else{$("#brands").css({display:"block"});}
showBrands=false;});$("#brands").click(function(){showBrands=true;});$("#searchStr").click(function(event){if($(this).val()=="Submit 1 name at a time"){$(this).val("");}
var inputLeft=findPosX(this);var inputTop=findPosY(this);if((tbBrowserIs=="ie")&&(tbBrowserVersion<7)){$("#brands").css({left:"16px",top:"365px"});}else{$("#brands").css({left:inputLeft,top:(inputTop+18)});}
showBrands=true;showResults("productBrands");});for(w=1;w<=selectTotal;w++){$("#brandSelected div#selected"+w).click(function(){var selectedID=$(this).attr("id");var selectContent=$("#"+selectedID+" div.selectedBrands").html();for(p=0;p<brandArray.length;p++){if(brandArray[p]==selectContent){brandId=brandIdArr[p];break;}}
for(g=1;g<=5;g++){if(brandId==$("#br"+g).val()){$("#br"+g).val("");}}
$(this).html("");if(($("#brandSelected div#selected1").html()=="")&&($("#brandSelected div#selected2").html()=="")&&($("#brandSelected div#selected3").html()=="")&&($("#brandSelected div#selected4").html()=="")&&($("#brandSelected div#selected5").html()=="")){$("#itemsSelected").css({display:"none"});$("#brandSelected").css({display:"none"});}});$("#brandSelected div#selected"+w).mouseover(function(){$(this).css("color","red");});$("#brandSelected div#selected"+w).mouseout(function(){$(this).css("color","black");});}
function showResults(divname){var divParent;if(divname=="productBrands"){divParent=divname;divname="brands";listContent=brandNames;}
$("#"+divname).html("");var re="";var returnStr="";var searchStr=$("#"+divParent+" #searchStr").val();if(searchStr.length==0){$("#"+divname).css({display:"none"});}else{$("#"+divname).css({display:"block"});}
var firstCheck=searchStr.substring(0,1);re=new RegExp("\^"+searchStr,"gi");var match=re.exec(listContent);if(match){var findStart=listContent.indexOf(match);var newStart=findStart;var finalStr="";for(x=0;x<resultsNum;x++){var test=listContent.indexOf(";",newStart);newStart=test+1;if(test==-1){finalStr=listContent.substring(findStart,listContent.length);break;}
else{if(x==(resultsNum-1)){finalStr=listContent.substring(findStart,test);}}}}else{re=new RegExp("\;"+searchStr,"gi");var subMatch=re.exec(listContent);if(subMatch){var findStart=listContent.indexOf(subMatch);var newStart=findStart;var finalStr="";for(x=0;x<resultsNum;x++){var test=listContent.indexOf(";",newStart);newStart=test+1;if(test==-1){finalStr=listContent.substring(findStart,listContent.length);break;}
else{if(x==(resultsNum-1)){finalStr=listContent.substring(findStart+1,test);}}}}else{$("#"+divname).html("Sorry, no brands found.");return;}}
var finalArray=finalStr.split(";");var outputContent="";for(y=0;y<finalArray.length;y++){var editVal=y+1;outputContent+="<div id='brand"+editVal+"' class='brandDiv'>"+finalArray[y]+"</div>";}
$("#"+divname).html(outputContent);resultsNumAlt=finalArray.length-1;for(y=0;y<finalArray.length;y++){for(u=1;u<=selectTotal;u++){var brand=$("#brandSelected div#selected"+u+" div.selectedBrands").html();if(finalArray[y]==brand){$("#"+divname+" #brand"+(y+1)).css({background:selectIEColor});}}}
for(x=0;x<=resultsNum;x++){$("#"+divname+" #brand"+x).mouseover(function(){if(($(this).css("background-color")==selectColorFF)||($(this).css("background-color")==selectIEColor)){return;}else{$(this).css({background:hoverColor});}});$("#"+divname+" #brand"+x).mouseout(function(){if(($(this).css("background-color")==selectColorFF)||($(this).css("background-color")==selectIEColor)){return;}else{$(this).css({background:""});}});$("#"+divname+" #brand"+x).click(function(){if(($(this).css("background-color")==selectColorFF)||($(this).css("background-color")==selectIEColor)){return false;}else{$(this).css({background:selectIEColor});$("#brandSelected").css({display:"block"});}
var contents=$(this).html();contents="<div class='cancelImg'><img src='http://images.totalbeauty.com/img/v5/productFinderCancel.gif' class='cancelSelect' /></div><div class='selectedBrands'>"+contents+"</div>";for(u=1;u<=selectTotal;u++){if($("#brandSelected div#selected"+u).html()==""){$("#brandSelected div#selected"+u).html(contents);$("#brandSelected div#selected"+u).css({display:"block"});break;}
if(u==selectTotal){$(this).css({background:""});alert("You can only select 5 Brands at a time");}}
selectNum=countOpenSlots();getBrandId(finalArray);});}}
function checkKeyCode(e,divname){var keynum;if(window.event)
{keynum=e.keyCode;}else if(e.which)
{keynum=e.which;}
keychar=String.fromCharCode(keynum);if((keynum>=48)&&(keynum<=57)){showResults(divname);}else if((keynum>=65)&&(keynum<=90)){showResults(divname);}else if((keynum>=86)&&(keynum<=105)){showResults(divname);}else if(keynum==8){showResults(divname);}else if(keynum==190){showResults(divname);}else if(keynum==13){$("form.productFinder").submit(function(){return false;});}
if(keynum==40){for(r=1;r<=resultsNum;r++){if(($("#brand"+r).css("background-color")!=selectColorFF)&&($("#brand"+r).css("background-color")!=selectColor)){$("#brand"+r).css({background:""});}}
if(arrowScroll<resultsNumAlt+1){arrowScroll++;}else{arrowScroll=1;}
if(($("#brand"+arrowScroll).css("background-color")!=selectColorFF)&&($("#brand"+arrowScroll).css("background-color")!=selectColor)){$("#brand"+arrowScroll).css({background:hoverColor});}}else if(keynum==38){for(r=0;r<resultsNum;r++){if(($("#brand"+r).css("background-color")!=selectColorFF)&&($("#brand"+r).css("background-color")!=selectColor)){$("#brand"+r).css({background:""});}}
if((arrowScroll<=resultsNumAlt+1)&&(arrowScroll>1)){arrowScroll--;}else{arrowScroll=resultsNumAlt+1;}
if(($("#brand"+arrowScroll).css("background-color")!=selectColorFF)&&($("#brand"+arrowScroll).css("background-color")!=selectColor)){$("#brand"+arrowScroll).css({background:hoverColor});}}}
function countOpenSlots(){var count=0;for(x=1;x<=selectTotal;x++){if($("#selected"+x).html()!=""){count=x;}}
return count;}
function getBrandId(){var brand="";var brandId="";for(r=1;r<=5;r++){brand=$("#brandSelected div#selected"+r+" div.selectedBrands").text();if(brand){for(p=0;p<brandArray.length;p++){if(brandArray[p]==brand){brandId=brandIdArr[p];$("#br"+r).val(brandId);break;}}}}}
function findPosX(obj){var curleft=0;if(obj.offsetParent)
while(1)
{curleft+=obj.offsetLeft;if(!obj.offsetParent)
break;obj=obj.offsetParent;}
else if(obj.x)
curleft+=obj.x;return curleft;}
function findPosY(obj){var curtop=0;if(obj.offsetParent)
while(1)
{curtop+=obj.offsetTop;if(!obj.offsetParent)
break;obj=obj.offsetParent;}
else if(obj.y)
curtop+=obj.y;return curtop;}
function loadPFControls(event){if(event.type=="mouseover"){var targetId=event.target.id;var parentId=$("#"+targetId).parent().attr("id");if((parentId!="productBrands")&&(parentId!="brands")){$("#brands").css({display:"none"});}}}