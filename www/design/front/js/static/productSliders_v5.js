var mouseSlideDrag=true;var slideMax=139;var slideMin=0;var slideActive="";var sliderWidth=13;var selectedSlider=0;var numofSlide=3;var priceRange=300;var priceConst=priceRange/slideMax;var ratingRange=10;var ratingConst=ratingRange/slideMax;var memberRange=10;var memberConst=memberRange/slideMax;var sliderActivate=false;if(!sliderActivate){sliderActivate=true;$("#leftHandle1").mousedown(function(event){slideActive="#leftHandle1";});$("#leftHandle2").mousedown(function(event){slideActive="#leftHandle2";});$("#leftHandle3").mousedown(function(event){slideActive="#leftHandle3";});$("#rightHandle1").mousedown(function(event){slideActive="#rightHandle1";});$("#rightHandle2").mousedown(function(event){slideActive="#rightHandle2";});$("#rightHandle3").mousedown(function(event){slideActive="#rightHandle3";});$("#slider1").mousedown(function(event){mouseSlideDrag=true;var selectedID=$(this).attr("id");selectedSlider=selectedID.substr(6,selectedID.length);slideHandle(event);$("html").mousemove(function(event){slideHandle(event);});});$("#slider2").mousedown(function(event){mouseSlideDrag=true;var selectedID=$(this).attr("id");selectedSlider=selectedID.substr(6,selectedID.length);slideHandle(event);$("html").mousemove(function(event){slideHandle(event);});});$("#slider3").mousedown(function(event){mouseSlideDrag=true;var selectedID=$(this).attr("id");selectedSlider=selectedID.substr(6,selectedID.length);slideHandle(event);$("html").mousemove(function(event){slideHandle(event);});});$("html").mouseup(function(){mouseSlideDrag=false;});$("#search").click(function(){var lowPrice=$("#minPrice").text();lowPrice=lowPrice.replace("$","");var highPrice=$("#maxPrice").text();highPrice=highPrice.replace("$","");var tbLowRating=$("#minRating").text();var tbHighRating=$("#maxRating").text();var lowAvgRating=$("#minMember").text();var highAvgRating=$("#maxMember").text();$("form.productFinder").append("<input type=\"hidden\" class=\"lowPrice\" name=\"pf[n_pr]\" value="+lowPrice+" />");$("form.productFinder").append("<input type=\"hidden\" class=\"highPrice\" name=\"pf[x_pr]\" value="+highPrice+" />");$("form.productFinder").append("<input type=\"hidden\" class=\"lowRating\" name=\"pf[n_tr]\" value="+tbLowRating+" />");$("form.productFinder").append("<input type=\"hidden\" class=\"highRating\" name=\"pf[x_tr]\" value="+tbHighRating+" />");$("form.productFinder").append("<input type=\"hidden\" class=\"lowAvgRating\" name=\"pf[n_ur]\" value="+lowAvgRating+" />");$("form.productFinder").append("<input type=\"hidden\" class=\"highAvgRating\" name=\"pf[x_ur]\" value="+highAvgRating+" />");});}
function slideHandle(event){if(mouseSlideDrag==true){var offset=$("#sliderContain").offset();var mouseSlidePos=event.pageX-offset.left;mouseSlidePos-=sliderWidth;var priceOffset=3;var ratingOffset=10;if(slideActive=="#leftHandle"+selectedSlider){var nextDivId=$("#leftHandle"+selectedSlider).parent().next("div").attr("id");var handleValue=$("#"+nextDivId+" span:first-child");var handleId=$("#"+nextDivId+" span:first-child").attr("id");var slideMaxWidth=$("#rightHandle"+selectedSlider).css("left");slideMaxWidth=parseInt(slideMaxWidth);$("#leftHandle"+selectedSlider).css({zIndex:"2"});$("#rightHandle"+selectedSlider).css({zIndex:"1"});if((mouseSlidePos<=slideMaxWidth)&&(mouseSlidePos>=slideMin)){$(slideActive).css({left:mouseSlidePos});$(handleValue).css({left:mouseSlidePos+ratingOffset});if(handleId=="minPrice"){$(handleValue).css({left:mouseSlidePos+priceOffset});if(mouseSlidePos<=7){$(handleValue).css({left:slideMin+10});}
if(mouseSlidePos>=slideMaxWidth-28){$(handleValue).css({left:slideMaxWidth-25});}else if(mouseSlidePos<=10){}}else{if(mouseSlidePos>=slideMaxWidth-15){$(handleValue).css({left:slideMaxWidth-5});}}}else if(mouseSlidePos>=slideMaxWidth){$(slideActive).css({left:slideMaxWidth});$(handleValue).css({left:slideMaxWidth-5});if(handleId=="minPrice"){$(handleValue).css({left:slideMaxWidth-25});}}else if(mouseSlidePos<=slideMin){$(slideActive).css({left:slideMin});$(handleValue).css({left:slideMin+ratingOffset});}
$(handleValue).css({left:parseInt($(handleValue).css("left"))-10});}else if(slideActive=="#rightHandle"+selectedSlider){var nextDivId=$("#leftHandle"+selectedSlider).parent().next("div").attr("id");var handleValue=$("#"+nextDivId+" span:first-child");handleValue=handleValue.next("span");var handleId=handleValue.attr("id");var slideMinWidth=$("#leftHandle"+selectedSlider).css("left");slideMinWidth=parseInt(slideMinWidth);$("#leftHandle"+selectedSlider).css({zIndex:"1"});$("#rightHandle"+selectedSlider).css({zIndex:"2"});if((mouseSlidePos<=slideMax)&&(mouseSlidePos>=slideMinWidth)){$(slideActive).css({left:mouseSlidePos});$(handleValue).css({left:mouseSlidePos+ratingOffset});if(handleId=="maxPrice"){$(handleValue).css({left:mouseSlidePos+priceOffset});if(mouseSlidePos<=slideMinWidth+28){$(handleValue).css({left:slideMinWidth+28});}}else{if(mouseSlidePos<=slideMinWidth+12){$(handleValue).css({left:slideMinWidth+12+ratingOffset});}}}else if(mouseSlidePos>=slideMax){$(slideActive).css({left:slideMax});$(handleValue).css({left:slideMax+ratingOffset});if(handleId=="maxPrice"){$(handleValue).css({left:slideMax});}}else if(mouseSlidePos<=slideMinWidth){$(slideActive).css({left:slideMinWidth+"px"});$(handleValue).css({left:slideMinWidth+12+ratingOffset+"px"});if(handleId=="maxPrice"){$(handleValue).css({left:slideMinWidth+28});}}
$(handleValue).css({left:parseInt($(handleValue).css("left"))-10});}
var leftHandlePos=parseInt($("#leftHandle"+selectedSlider).css("left"));var rightHandlePos=parseInt($("#rightHandle"+selectedSlider).css("left"));var highlightWidth=rightHandlePos-leftHandlePos;highlightWidth+=sliderWidth;$("#highlight"+selectedSlider).css({width:highlightWidth+"px",left:leftHandlePos});if(selectedSlider==1){var minPrice=leftHandlePos;var maxPrice=rightHandlePos;if(minPrice>50){minPrice=leftHandlePos*(Math.log(leftHandlePos)-2.775);minPrice=Math.round(minPrice);}
if(maxPrice>50){maxPrice=rightHandlePos*(Math.log(rightHandlePos)-2.775);maxPrice=Math.round(maxPrice);}
if(minPrice==0){$("#minPrice").html("$0");}else{$("#minPrice").html("$"+minPrice);}
$("#maxPrice").html("$"+maxPrice);}else if(selectedSlider==2){var minRating=leftHandlePos*ratingConst;var maxRating=rightHandlePos*ratingConst;minRating=Math.round(minRating);maxRating=Math.round(maxRating);if(minRating==0){$("#minRating").html("0");}else{$("#minRating").html(minRating);}
if(maxRating==0){$("#maxRating").html("0");}else{$("#maxRating").html(maxRating);}}else if(selectedSlider==3){var minMember=leftHandlePos*memberConst;var maxMember=rightHandlePos*memberConst;minMember=Math.round(minMember);maxMember=Math.round(maxMember);if(minMember==0){$("#minMember").html("0");}else{$("#minMember").html(minMember);}
if(maxMember==0){$("#maxMember").html("0");}else{$("#maxMember").html(maxMember);}}}}